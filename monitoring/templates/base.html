{% load static %}
<!DOCTYPE html>
<html lang="fr" class="h-full">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}Scout - Monitoring{% endblock %}</title>

    <!-- Tailwind CSS -->
    <link href="{% static 'css/output.css' %}" rel="stylesheet" />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
      rel="stylesheet"
    />

    <!-- Alpine.js for interactivity -->
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>

    <!-- Chart.js for visualizations -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>

    {% block extra_head %}{% endblock %}
  </head>
  <body class="h-full bg-gray-50" x-data="{ sidebarOpen: false }">
    <!-- Sidebar for mobile -->
    <div
      x-show="sidebarOpen"
      @click="sidebarOpen = false"
      x-transition:enter="transition-opacity ease-linear duration-300"
      x-transition:enter-start="opacity-0"
      x-transition:enter-end="opacity-100"
      x-transition:leave="transition-opacity ease-linear duration-300"
      x-transition:leave-start="opacity-100"
      x-transition:leave-end="opacity-0"
      class="fixed inset-0 z-40 bg-gray-600 bg-opacity-75 lg:hidden"
      style="display: none"
    ></div>

    <!-- Sidebar -->
    <div class="hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col">
      <div
        class="flex flex-col flex-grow bg-primary-800 pt-5 pb-4 overflow-y-auto"
      >
        <!-- Logo -->
        <div class="flex items-center flex-shrink-0 px-4">
          <svg
            class="h-8 w-8 text-white"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"
            />
          </svg>
          <span class="ml-3 text-2xl font-bold text-white">Scout</span>
        </div>

        <!-- Navigation -->
        <nav class="mt-8 flex-1 px-2 space-y-1">
          <a
            href="{% url 'dashboard' %}"
            class="{% if request.resolver_match.url_name == 'dashboard' %}bg-primary-900 text-white{% else %}text-primary-100 hover:bg-primary-700{% endif %} group flex items-center px-2 py-2 text-sm font-medium rounded-md"
          >
            <svg
              class="mr-3 h-6 w-6"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"
              />
            </svg>
            Dashboard
          </a>

          <a
            href="{% url 'alerts' %}"
            class="{% if request.resolver_match.url_name == 'alerts' %}bg-primary-900 text-white{% else %}text-primary-100 hover:bg-primary-700{% endif %} group flex items-center px-2 py-2 text-sm font-medium rounded-md"
          >
            <svg
              class="mr-3 h-6 w-6"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"
              />
            </svg>
            Alertes
            <span
              class="ml-auto inline-block py-0.5 px-2 text-xs font-medium bg-danger-500 text-white rounded-full"
              >3</span
            >
          </a>

          <a
            href="{% url 'metrics' %}"
            class="{% if request.resolver_match.url_name == 'metrics' %}bg-primary-900 text-white{% else %}text-primary-100 hover:bg-primary-700{% endif %} group flex items-center px-2 py-2 text-sm font-medium rounded-md"
          >
            <svg
              class="mr-3 h-6 w-6"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"
              />
            </svg>
            Métriques
          </a>

          <a
            href="{% url 'reports' %}"
            class="{% if request.resolver_match.url_name == 'reports' %}bg-primary-900 text-white{% else %}text-primary-100 hover:bg-primary-700{% endif %} group flex items-center px-2 py-2 text-sm font-medium rounded-md"
          >
            <svg
              class="mr-3 h-6 w-6"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
              />
            </svg>
            Rapports
          </a>
        </nav>

        <!-- User section -->
        <div class="flex-shrink-0 flex border-t border-primary-700 p-4">
          <div class="flex items-center">
            <div class="flex-shrink-0">
              <div
                class="h-10 w-10 rounded-full bg-primary-600 flex items-center justify-center"
              >
                <span class="text-white font-semibold"
                  >{{ user.username.0|upper }}</span
                >
              </div>
            </div>
            <div class="ml-3">
              <p class="text-sm font-medium text-white">{{ user.username }}</p>
              <a
                href="{% url 'logout' %}"
                class="text-xs font-medium text-primary-300 hover:text-white"
                >Se déconnecter</a
              >
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Main content area -->
    <div class="lg:pl-64 flex flex-col flex-1">
      <!-- Top bar for mobile -->
      <div
        class="sticky top-0 z-10 flex-shrink-0 flex h-16 bg-white shadow lg:hidden"
      >
        <button
          @click="sidebarOpen = true"
          class="px-4 border-r border-gray-200 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 lg:hidden"
        >
          <svg
            class="h-6 w-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 6h16M4 12h16M4 18h16"
            />
          </svg>
        </button>
        <div class="flex-1 px-4 flex justify-between items-center">
          <span class="text-xl font-bold text-gray-900">Scout</span>
        </div>
      </div>

      <main class="flex-1">
        <!-- Page header -->
        <div class="bg-white shadow">
          <div class="px-4 sm:px-6 lg:px-8 py-6">
            <h1 class="text-2xl font-bold text-gray-900">
              {% block page_title %}Dashboard{% endblock %}
            </h1>
            {% block page_description %}{% endblock %}
          </div>
        </div>

        <!-- Page content -->
        <div class="px-4 sm:px-6 lg:px-8 py-8">
          {% block content %}{% endblock %}
        </div>
      </main>
    </div>

    {% block extra_scripts %}{% endblock %}
  </body>
</html>
